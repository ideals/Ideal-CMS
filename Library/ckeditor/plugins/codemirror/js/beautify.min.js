(function(){function n(n,t){"use strict";var r=new i(n,t);return r.beautify()}function i(n,i){"use strict";function ui(n,t){var i=0;return n&&(i=n.indentation_level,!st()&&n.line_indent_level>i&&(i=n.line_indent_level)),{mode:t,parent:n,last_text:n?n.last_text:"",last_word:n?n.last_word:"",declaration_statement:!1,declaration_assignment:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:i,line_indent_level:n?n.line_indent_level:i,start_line_index:h.length,had_comment:!1,ternary_depth:0}}function fi(){return{text:[]}}function kt(n){if(n=n===undefined?!1:n,h.length)for(ei(h[h.length-1],n);n&&h.length>1&&h[h.length-1].text.length===0;)h.pop(),ei(h[h.length-1],n)}function ei(n){while(n.text.length&&(n.text[n.text.length-1]===" "||n.text[n.text.length-1]===tt||n.text[n.text.length-1]===ct))n.text.pop()}function dt(n){return n.replace(/^\s+|\s+$/g,"")}function ci(n){n=n.replace(/\x0d/g,"");for(var i=[],t=n.indexOf("\n");t!==-1;)i.push(n.substring(0,t)),n=n.substring(t+1),t=n.indexOf("\n");return n.length&&i.push(n),i}function st(){var n=h[h.length-1];return n.text.length===0}function li(){if(st()){if(h.length===1)return!0;var n=h[h.length-2];return n.text.length===0}return!1}function rt(n){if(n=n===undefined?!1:n,e.wrap_line_length&&!n){var t=h[h.length-1],i=0;t.text.length>0&&(i=t.text.join("").length+c.length+(s?1:0),i>=e.wrap_line_length&&(n=!0))}(e.preserve_newlines&&g||n)&&!st()&&(a(!1,!0),ut(r.mode)||lt(r.mode)||r.mode===l.Statement||(it=!0))}function a(n,t){if(it=!1,s=!1,!t&&r.last_text!==";"&&r.last_text!==","&&r.last_text!=="="&&f!=="TK_OPERATOR")while(r.mode===l.Statement&&!r.if_block&&!r.do_block)nt();h.length===1&&st()||(n||!st())&&(r.multiline_frame=!0,h.push(fi()))}function ai(){var n,t;if(st())if(n=h[h.length-1],e.keep_array_indentation&&ut(r.mode)&&g)for(n.text.push(""),t=0;t<ot.length;t+=1)n.text.push(ot[t]);else ct&&n.text.push(ct),vi(r.indentation_level+(it?1:0))}function vi(n){var i,t;if(h.length>1)for(i=h[h.length-1],r.line_indent_level=n,t=0;t<n;t+=1)i.text.push(tt)}function yi(){var n=h[h.length-1],t;s&&n.text.length&&(t=n.text[n.text.length-1],t!==" "&&t!==tt&&n.text.push(" "))}function p(n){n=n||c,ai(),it=!1,yi(),s=!1,h[h.length-1].text.push(n)}function at(){r.indentation_level+=1}function pi(){r.indentation_level>0&&(!r.parent||r.indentation_level>r.parent.indentation_level)&&(r.indentation_level-=1)}function oi(n){if(!n.multiline_frame)for(var i=n.start_line_index,r=0,t;i<h.length;)(t=h[i],i++,t.text.length!==0)&&(r=ct&&t.text[0]===ct?1:0,t.text[r]===tt&&t.text.splice(r,1))}function vt(n){r?(pt.push(r),k=r):k=ui(null,n),r=ui(k,n)}function ut(n){return n===l.ArrayLiteral}function lt(n){return v(n,[l.Expression,l.ForInitializer,l.Conditional])}function nt(){pt.length>0&&(k=r,r=pt.pop(),k.mode===l.Statement&&oi(k))}function gt(){return r.mode===l.ObjectLiteral&&r.last_text===":"&&r.ternary_depth===0}function wt(){return f==="TK_RESERVED"&&v(r.last_text,["var","let","const"])&&y==="TK_WORD"||f==="TK_RESERVED"&&r.last_text==="do"||f==="TK_RESERVED"&&r.last_text==="return"&&!g||f==="TK_RESERVED"&&r.last_text==="else"&&!(y==="TK_RESERVED"&&c==="if")||f==="TK_END_EXPR"&&(k.mode===l.ForInitializer||k.mode===l.Conditional)?(vt(l.Statement),at(),f==="TK_RESERVED"&&v(r.last_text,["var","let","const"])&&y==="TK_WORD"&&(r.declaration_statement=!0),rt(y==="TK_RESERVED"&&v(c,["do","for","if","while"])),it=!1,!0):!1}function wi(n,t){for(var r,i=0;i<n.length;i++)if(r=dt(n[i]),r.charAt(0)!==t)return!1;return!0}function yt(n){return v(n,["case","return","do","if","throw","else"])}function v(n,t){for(var i=0;i<t.length;i+=1)if(t[i]===n)return!0;return!1}function bi(n){for(var e=!1,u="",r=0,f="",t=0,i;e||r<n.length;)if(i=n.charAt(r),r++,e){if(e=!1,i==="x")f=n.substr(r,2),r+=2;else if(i==="u")f=n.substr(r,4),r+=4;else{u+="\\"+i;continue}if(!f.match(/^[0123456789abcdefABCDEF]+$/))return n;if(t=parseInt(f,16),t>=0&&t<32){u+=i==="x"?"\\x"+f:"\\u"+f;continue}else if(t===34||t===39||t===92)u+="\\"+String.fromCharCode(t);else{if(i==="x"&&t>126&&t<=255)return n;u+=String.fromCharCode(t)}}else i==="\\"?e=!0:u+=i;return u}function ki(n){for(var t=u,i=o.charAt(t);v(i,bt)&&i!==n;){if(t++,t>=w)return!1;i=o.charAt(t)}return i===n}function si(){var i,n,ft,et,a,rt,b,lt,it,ut,p;if(d=0,u>=w)return["","TK_EOF"];for(g=!1,ot=[],n=o.charAt(u),u+=1;v(n,bt);){if(n==="\n"?(d+=1,ot=[]):d&&(n===tt?ot.push(tt):n!=="\r"&&ot.push(" ")),u>=w)return["","TK_EOF"];n=o.charAt(u),u+=1}if(t.isIdentifierChar(o.charCodeAt(u-1))){if(u<w)while(t.isIdentifierChar(o.charCodeAt(u)))if(n+=o.charAt(u),u+=1,u===w)break;return u!==w&&n.match(/^[0-9]+[Ee]$/)&&(o.charAt(u)==="-"||o.charAt(u)==="+")?(ft=o.charAt(u),u+=1,et=si(),n+=ft+et[0],[n,"TK_WORD"]):!(f==="TK_DOT"||f==="TK_RESERVED"&&v(r.last_text,["set","get"]))&&v(n,ti)?n==="in"?[n,"TK_OPERATOR"]:[n,"TK_RESERVED"]:[n,"TK_WORD"]}if(n==="("||n==="[")return[n,"TK_START_EXPR"];if(n===")"||n==="]")return[n,"TK_END_EXPR"];if(n==="{")return[n,"TK_START_BLOCK"];if(n==="}")return[n,"TK_END_BLOCK"];if(n===";")return[n,"TK_SEMICOLON"];if(n==="/"){if(a="",rt=!0,o.charAt(u)==="*"){if(u+=1,u<w)while(u<w&&!(o.charAt(u)==="*"&&o.charAt(u+1)&&o.charAt(u+1)==="/"))if(n=o.charAt(u),a+=n,(n==="\n"||n==="\r")&&(rt=!1),u+=1,u>=w)break;return u+=2,rt&&d===0?["/*"+a+"*/","TK_INLINE_COMMENT"]:["/*"+a+"*/","TK_BLOCK_COMMENT"]}if(o.charAt(u)==="/"){for(a=n;o.charAt(u)!=="\r"&&o.charAt(u)!=="\n";)if(a+=o.charAt(u),u+=1,u>=w)break;return[a,"TK_COMMENT"]}}if(n==="`"||n==="'"||n==='"'||(n==="/"||e.e4x&&n==="<"&&o.slice(u-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&(f==="TK_RESERVED"&&yt(r.last_text)||f==="TK_END_EXPR"&&v(k.mode,[l.Conditional,l.ForInitializer])||v(f,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var y=n,c=!1,st=!1;if(i=n,u<w)if(y==="/"){for(b=!1;c||b||o.charAt(u)!==y;)if(i+=o.charAt(u),c?c=!1:(c=o.charAt(u)==="\\",o.charAt(u)==="["?b=!0:o.charAt(u)==="]"&&(b=!1)),u+=1,u>=w)return[i,"TK_STRING"]}else if(e.e4x&&y==="<"){var ct=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,nt=o.slice(u-1),s=ct.exec(nt);if(s&&s.index===0){for(lt=s[2],it=0;s;){var vt=!!s[1],at=s[2],pt=!!s[s.length-1]||at.slice(0,8)==="![CDATA[";if(at!==lt||pt||(vt?--it:++it),it<=0)break;s=ct.exec(nt)}return ut=s?s.index+s[0].length:nt.length,u+=ut-1,[nt.slice(0,ut),"TK_STRING"]}}else while(c||o.charAt(u)!==y)if(i+=o.charAt(u),c?((o.charAt(u)==="x"||o.charAt(u)==="u")&&(st=!0),c=!1):c=o.charAt(u)==="\\",u+=1,u>=w)return[i,"TK_STRING"];if(u+=1,i+=y,st&&e.unescape_strings&&(i=bi(i)),y==="/")while(u<w&&v(o.charAt(u),ni))i+=o.charAt(u),u+=1;return[i,"TK_STRING"]}if(n==="#"){if(h.length===1&&h[0].text.length===0&&o.charAt(u)==="!"){for(i=n;u<w&&n!=="\n";)n=o.charAt(u),i+=n,u+=1;return[dt(i)+"\n","TK_UNKNOWN"]}if(p="#",u<w&&v(o.charAt(u),ii)){do n=o.charAt(u),p+=n,u+=1;while(u<w&&n!=="#"&&n!=="=");return n==="#"||(o.charAt(u)==="["&&o.charAt(u+1)==="]"?(p+="[]",u+=2):o.charAt(u)==="{"&&o.charAt(u+1)==="}"&&(p+="{}",u+=2)),[p,"TK_WORD"]}}if(n==="<"&&o.substring(u-1,u+3)==="<!--"){for(u+=3,n="<!--";o.charAt(u)!=="\n"&&u<w;)n+=o.charAt(u),u++;return r.in_html_comment=!0,[n,"TK_COMMENT"]}if(n==="-"&&r.in_html_comment&&o.substring(u-1,u+2)==="-->")return r.in_html_comment=!1,u+=2,["-->","TK_COMMENT"];if(n===".")return[n,"TK_DOT"];if(v(n,ht)){while(u<w&&v(n+o.charAt(u),ht))if(n+=o.charAt(u),u+=1,u>=w)break;return n===","?[n,"TK_COMMA"]:n==="="?[n,"TK_EQUALS"]:[n,"TK_OPERATOR"]}return[n,"TK_UNKNOWN"]}function di(){wt();var n=l.Expression;if(c==="["){if(f==="TK_WORD"||r.last_text===")"){f==="TK_RESERVED"&&v(r.last_text,et)&&(s=!0),vt(n),p(),at(),e.space_in_paren&&(s=!0);return}n=l.ArrayLiteral,ut(r.mode)&&(r.last_text==="["||r.last_text===","&&(ft==="]"||ft==="}"))&&(e.keep_array_indentation||a())}else f==="TK_RESERVED"&&r.last_text==="for"?n=l.ForInitializer:f==="TK_RESERVED"&&v(r.last_text,["if","while"])&&(n=l.Conditional);r.last_text===";"||f==="TK_START_BLOCK"?a():f==="TK_END_EXPR"||f==="TK_START_EXPR"||f==="TK_END_BLOCK"||r.last_text==="."?(rt(g),it=!1):f==="TK_RESERVED"&&c==="("||f==="TK_WORD"||f==="TK_OPERATOR"?f==="TK_RESERVED"&&(r.last_word==="function"||r.last_word==="typeof")?e.jslint_happy&&(s=!0):f==="TK_RESERVED"&&(v(r.last_text,et)||r.last_text==="catch")&&e.space_before_conditional&&(s=!0):s=!0,c==="("&&(f==="TK_EQUALS"||f==="TK_OPERATOR")&&(gt()||rt()),vt(n),p(),e.space_in_paren&&(s=!0),at()}function gi(){while(r.mode===l.Statement)nt();r.multiline_frame&&(rt(c==="]"&&ut(r.mode)&&!e.keep_array_indentation),it=!1),e.space_in_paren&&(f!=="TK_START_EXPR"||e.space_in_empty_paren?s=!0:(kt(),s=!1)),c==="]"&&e.keep_array_indentation?(p(),nt()):(nt(),p()),oi(k),r.do_while&&k.mode===l.Conditional&&(k.mode=l.Expression,r.do_block=!1,r.do_while=!1)}function nr(){vt(l.BlockStatement);var n=ki("}"),t=n&&r.last_word==="function"&&f==="TK_END_EXPR";e.brace_style==="expand"?f!=="TK_OPERATOR"&&(t||f==="TK_EQUALS"||f==="TK_RESERVED"&&yt(r.last_text)&&r.last_text!=="else")?s=!0:a(!1,!0):f!=="TK_OPERATOR"&&f!=="TK_START_EXPR"?f==="TK_START_BLOCK"?a():s=!0:ut(k.mode)&&r.last_text===","&&(ft==="}"?s=!0:a()),p(),at()}function tr(){while(r.mode===l.Statement)nt();var n=f==="TK_START_BLOCK";e.brace_style==="expand"?n||a():n||(ut(r.mode)&&e.keep_array_indentation?(e.keep_array_indentation=!1,a(),e.keep_array_indentation=!0):a()),nt(),p()}function hi(){if(wt()||!g||lt(r.mode)||f==="TK_OPERATOR"&&r.last_text!=="--"&&r.last_text!=="++"||f==="TK_EQUALS"||!e.preserve_newlines&&f==="TK_RESERVED"&&v(r.last_text,["var","let","const","set","get"])||a(),r.do_block&&!r.do_while){if(y==="TK_RESERVED"&&c==="while"){s=!0,p(),s=!0,r.do_while=!0;return}a(),r.do_block=!1}if(r.if_block&&!(y==="TK_RESERVED"&&c==="else")){while(r.mode===l.Statement)nt();r.if_block=!1}if(y==="TK_RESERVED"&&(c==="case"||c==="default"&&r.in_case_statement)){a(),(r.case_body||e.jslint_happy)&&(pi(),r.case_body=!1),p(),r.in_case=!0,r.in_case_statement=!0;return}if(y==="TK_RESERVED"&&c==="function"&&((v(r.last_text,["}",";"])||st()&&!v(r.last_text,["{",":","=",","]))&&(li()||r.had_comment||(a(),a(!0))),f==="TK_RESERVED"||f==="TK_WORD"?f==="TK_RESERVED"&&v(r.last_text,["get","set","new","return"])?s=!0:a():f==="TK_OPERATOR"||r.last_text==="="?s=!0:lt(r.mode)||a()),(f==="TK_COMMA"||f==="TK_START_EXPR"||f==="TK_EQUALS"||f==="TK_OPERATOR")&&(gt()||rt()),y==="TK_RESERVED"&&c==="function"){p(),r.last_word=c;return}if(b="NONE",f==="TK_END_BLOCK"?y==="TK_RESERVED"&&v(c,["else","catch","finally"])?e.brace_style==="expand"||e.brace_style==="end-expand"?b="NEWLINE":(b="SPACE",s=!0):b="NEWLINE":f==="TK_SEMICOLON"&&r.mode===l.BlockStatement?b="NEWLINE":f==="TK_SEMICOLON"&&lt(r.mode)?b="SPACE":f==="TK_STRING"?b="NEWLINE":f==="TK_RESERVED"||f==="TK_WORD"?b="SPACE":f==="TK_START_BLOCK"?b="NEWLINE":f==="TK_END_EXPR"&&(s=!0,b="NEWLINE"),y==="TK_RESERVED"&&v(c,et)&&r.last_text!==")"&&(b=r.last_text==="else"?"SPACE":"NEWLINE"),y==="TK_RESERVED"&&v(c,["else","catch","finally"]))if(f!=="TK_END_BLOCK"||e.brace_style==="expand"||e.brace_style==="end-expand")a();else{kt(!0);var n=h[h.length-1];n.text[n.text.length-1]!=="}"&&a(),s=!0}else b==="NEWLINE"?f==="TK_RESERVED"&&yt(r.last_text)?s=!0:f!=="TK_END_EXPR"?f==="TK_START_EXPR"&&y==="TK_RESERVED"&&v(c,["var","let","const"])||r.last_text===":"||(y==="TK_RESERVED"&&c==="if"&&r.last_word==="else"&&r.last_text!=="{"?s=!0:a()):y==="TK_RESERVED"&&v(c,et)&&r.last_text!==")"&&a():ut(r.mode)&&r.last_text===","&&ft==="}"?a():b==="SPACE"&&(s=!0);p(),r.last_word=c,y==="TK_RESERVED"&&c==="do"&&(r.do_block=!0),y==="TK_RESERVED"&&c==="if"&&(r.if_block=!0)}function ir(){for(wt()&&(s=!1);r.mode===l.Statement&&!r.if_block&&!r.do_block;)nt();p(),r.mode===l.ObjectLiteral&&(r.mode=l.BlockStatement)}function rr(){wt()?s=!0:f==="TK_RESERVED"||f==="TK_WORD"?s=!0:f==="TK_COMMA"||f==="TK_START_EXPR"||f==="TK_EQUALS"||f==="TK_OPERATOR"?gt()||rt():a(),p()}function ur(){r.declaration_statement&&(r.declaration_assignment=!0),s=!0,p(),s=!0}function fr(){if(r.declaration_statement){lt(r.parent.mode)&&(r.declaration_assignment=!1),p(),r.declaration_assignment?(r.declaration_assignment=!1,a(!1,!0)):s=!0;return}f==="TK_END_BLOCK"&&r.mode!==l.Expression?(p(),r.mode===l.ObjectLiteral&&r.last_text==="}"?a():s=!0):r.mode===l.ObjectLiteral?(p(),a()):(p(),s=!0)}function er(){var n=!0,t=!0;if(f==="TK_RESERVED"&&yt(r.last_text)){s=!0,p();return}if(c==="*"&&f==="TK_DOT"&&!ft.match(/^\d+$/)){p();return}if(c===":"&&r.in_case){r.case_body=!0,at(),p(),a(),r.in_case=!1;return}if(c==="::"){p();return}g&&(c==="--"||c==="++")&&a(),f==="TK_OPERATOR"&&rt(),v(c,["--","++","!"])||v(c,["-","+"])&&(v(f,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||v(r.last_text,et)||r.last_text===",")?(n=!1,t=!1,r.last_text===";"&&lt(r.mode)&&(n=!0),f==="TK_RESERVED"&&(n=!0),(r.mode===l.BlockStatement||r.mode===l.Statement)&&(r.last_text==="{"||r.last_text===";")&&a()):c===":"?r.ternary_depth===0?(r.mode===l.BlockStatement&&(r.mode=l.ObjectLiteral),n=!1):r.ternary_depth-=1:c==="?"&&(r.ternary_depth+=1),s=s||n,p(),s=t}function or(){var n=ci(c),t,i=!1;for(a(!1,!0),n.length>1&&wi(n.slice(1),"*")&&(i=!0),p(n[0]),t=1;t<n.length;t++)a(!1,!0),i?p(" "+dt(n[t])):h[h.length-1].text.push(n[t]);a(!1,!0)}function sr(){s=!0,p(),s=!0}function hr(){g?a(!1,!0):kt(!0),s=!0,p(),a(!1,!0)}function cr(){f==="TK_RESERVED"&&yt(r.last_text)?s=!0:rt(r.last_text===")"&&e.break_chained_methods),p()}function lr(){p(),c[c.length-1]==="\n"&&a()}var o,h,c,y,f,ft,tt,r,k,pt,bt,ni,ht,u,et,ti,ii,b,g,it,s,w,d,ot,ri,l,e,ct="";for(bt="\n\r\t ".split(""),ni="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),ii="0123456789".split(""),ht="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! , : ? ^ ^= |= :: =>",ht+=" <%= <% %> <?= <? ?>",ht=ht.split(" "),et="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function".split(","),ti=et.concat(["do","in","else","get","set","new","catch","finally","typeof"]),l={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},ri={TK_START_EXPR:di,TK_END_EXPR:gi,TK_START_BLOCK:nr,TK_END_BLOCK:tr,TK_WORD:hi,TK_RESERVED:hi,TK_SEMICOLON:ir,TK_STRING:rr,TK_EQUALS:ur,TK_OPERATOR:er,TK_COMMA:fr,TK_BLOCK_COMMENT:or,TK_INLINE_COMMENT:sr,TK_COMMENT:hr,TK_DOT:cr,TK_UNKNOWN:lr},i=i?i:{},e={},i.space_after_anon_function!==undefined&&i.jslint_happy===undefined&&(i.jslint_happy=i.space_after_anon_function),i.braces_on_own_line!==undefined&&(e.brace_style=i.braces_on_own_line?"expand":"collapse"),e.brace_style=i.brace_style?i.brace_style:e.brace_style?e.brace_style:"collapse",e.brace_style==="expand-strict"&&(e.brace_style="expand"),e.indent_size=i.indent_size?parseInt(i.indent_size,10):4,e.indent_char=i.indent_char?i.indent_char:" ",e.preserve_newlines=i.preserve_newlines===undefined?!0:i.preserve_newlines,e.break_chained_methods=i.break_chained_methods===undefined?!1:i.break_chained_methods,e.max_preserve_newlines=i.max_preserve_newlines===undefined?0:parseInt(i.max_preserve_newlines,10),e.space_in_paren=i.space_in_paren===undefined?!1:i.space_in_paren,e.space_in_empty_paren=i.space_in_empty_paren===undefined?!1:i.space_in_empty_paren,e.jslint_happy=i.jslint_happy===undefined?!1:i.jslint_happy,e.keep_array_indentation=i.keep_array_indentation===undefined?!1:i.keep_array_indentation,e.space_before_conditional=i.space_before_conditional===undefined?!0:i.space_before_conditional,e.unescape_strings=i.unescape_strings===undefined?!1:i.unescape_strings,e.wrap_line_length=i.wrap_line_length===undefined?0:parseInt(i.wrap_line_length,10),e.e4x=i.e4x===undefined?!1:i.e4x,i.indent_with_tabs&&(e.indent_char="\t",e.indent_size=1),tt="";e.indent_size>0;)tt+=e.indent_char,e.indent_size-=1;while(n&&(n.charAt(0)===" "||n.charAt(0)==="\t"))ct+=n.charAt(0),n=n.substring(1);o=n,w=n.length,f="TK_START_BLOCK",ft="",h=[fi()],it=!1,s=!1,ot=[],pt=[],vt(l.BlockStatement),u=0,this.beautify=function(){for(var i,n,o,u,t;;){if(i=si(),c=i[0],y=i[1],y==="TK_EOF"){while(r.mode===l.Statement)nt();break}if(o=e.keep_array_indentation&&ut(r.mode),g=d>0,o)for(n=0;n<d;n+=1)a(n>0);else if(e.max_preserve_newlines&&d>e.max_preserve_newlines&&(d=e.max_preserve_newlines),e.preserve_newlines&&d>1)for(a(),n=1;n<d;n+=1)a(!0);ri[y](),y!=="TK_INLINE_COMMENT"&&y!=="TK_COMMENT"&&y!=="TK_BLOCK_COMMENT"&&y!=="TK_UNKNOWN"&&(ft=r.last_text,f=y,r.last_text=c),r.had_comment=y==="TK_INLINE_COMMENT"||y==="TK_COMMENT"||y==="TK_BLOCK_COMMENT"}for(u=h[0].text.join(""),t=1;t<h.length;t++)u+="\n"+h[t].text.join("");return u.replace(/[\r\n ]+$/,"")}}var t={};(function(n){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",i=new RegExp("["+t+"]"),r=new RegExp("["+t+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),u=n.isIdentifierStart=function(n){return n<65?n===36:n<91?!0:n<97?n===95:n<123?!0:n>=170&&i.test(String.fromCharCode(n))},f=n.isIdentifierChar=function(n){return n<48?n===36:n<58?!0:n<65?!1:n<91?!0:n<97?n===95:n<123?!0:n>=170&&r.test(String.fromCharCode(n))}})(t),typeof define=="function"&&define.amd?define([],function(){return n}):typeof exports!="undefined"?exports.js_beautify=n:typeof window!="undefined"?window.js_beautify=n:typeof global!="undefined"&&(global.js_beautify=n)})(),function(){function t(n){return n.replace(/^\s+|\s+$/g,"")}function i(n){return n.replace(/^\s+/g,"")}function n(n,r,u,f){function rt(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=b,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(n,t){for(var i=0;i<t.length;i++)if(n===t[i])return!0;return!1}},this.traverse_whitespace=function(){var n="";if(n=this.input.charAt(this.pos),this.Utils.in_array(n,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(n,this.Utils.whitespace);)y&&n==="\n"&&this.newlines<=tt&&(this.newlines+=1),this.pos++,n=this.input.charAt(this.pos);return!0}return!1},this.get_content=function(){for(var r="",n=[],t=!1,i;this.input.charAt(this.pos)!=="<";){if(this.pos>=this.input.length)return n.length?n.join(""):["","TK_EOF"];if(this.traverse_whitespace()){n.length&&(t=!0);continue}if(o)if(i=this.input.substr(this.pos,3),i==="{{#"||i==="{{/")break;else if(this.input.substr(this.pos,2)==="{{"&&this.get_tag(!0)==="{{else}}")break;r=this.input.charAt(this.pos),this.pos++,t&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,n),this.print_indentation(n)):(this.line_char_count++,n.push(" ")),t=!1),this.line_char_count++,n.push(r)}return n.length?n.join(""):""},this.get_contents_to=function(n){var i,t;if(this.pos===this.input.length)return["","TK_EOF"];var r="",u=new RegExp("<\/"+n+"\\s*>","igm");return u.lastIndex=this.pos,i=u.exec(this.input),t=i?i.index:this.input.length,this.pos<t&&(r=this.input.substring(this.pos,t),this.pos=t),r},this.record_tag=function(n){this.tags[n+"count"]?(this.tags[n+"count"]++,this.tags[n+this.tags[n+"count"]]=this.indent_level):(this.tags[n+"count"]=1,this.tags[n+this.tags[n+"count"]]=this.indent_level),this.tags[n+this.tags[n+"count"]+"parent"]=this.tags.parent,this.tags.parent=n+this.tags[n+"count"]},this.retrieve_tag=function(n){if(this.tags[n+"count"]){for(var t=this.tags.parent;t;){if(n+this.tags[n+"count"]===t)break;t=this.tags[t+"parent"]}t&&(this.indent_level=this.tags[n+this.tags[n+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[n+this.tags[n+"count"]+"parent"],delete this.tags[n+this.tags[n+"count"]],this.tags[n+"count"]===1?delete this.tags[n+"count"]:this.tags[n+"count"]--}},this.indent_to_tag=function(n){if(this.tags[n+"count"]){for(var t=this.tags.parent;t;){if(n+this.tags[n+"count"]===t)break;t=this.tags[t+"parent"]}t&&(this.indent_level=this.tags[n+this.tags[n+"count"]])}},this.get_tag=function(n){var i="",t=[],c="",f=!1,e,h,s,l=this.pos,a=this.line_char_count,u,y,p,r;n=n!==undefined?n:!1;do{if(this.pos>=this.input.length)return n&&(this.pos=l,this.line_char_count=a),t.length?t.join(""):["","TK_EOF"];if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace)){f=!0;continue}if((i==="'"||i==='"')&&(i+=this.get_unformatted(i),f=!0),i==="="&&(f=!1),t.length&&t[t.length-1]!=="="&&i!==">"&&f&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,t),this.print_indentation(t)):(t.push(" "),this.line_char_count++),f=!1),o&&s==="<"&&i+this.input.charAt(this.pos)==="{{"&&(i+=this.get_unformatted("}}"),t.length&&t[t.length-1]!==" "&&t[t.length-1]!=="<"&&(i=" "+i),f=!0),i!=="<"||s||(e=this.pos-1,s="<"),o&&!s&&t.length>=2&&t[t.length-1]==="{"&&t[t.length-2]=="{"&&(e=i==="#"||i==="/"?this.pos-3:this.pos-2,s="{"),this.line_char_count++,t.push(i),t[1]&&t[1]==="!"){t=[this.get_comment(e)];break}if(o&&s==="{"&&t.length>2&&t[t.length-2]==="}"&&t[t.length-1]==="}")break}while(i!==">");return u=t.join(""),y=u.indexOf(" ")!==-1?u.indexOf(" "):u[0]==="{"?u.indexOf("}"):u.indexOf(">"),p=u[0]!=="<"&&o?u[2]==="#"?3:2:1,r=u.substring(p,y).toLowerCase(),u.charAt(u.length-2)==="/"||this.Utils.in_array(r,this.Utils.single_token)?n||(this.tag_type="SINGLE"):o&&u[0]==="{"&&r==="else"?n||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):r==="script"?n||(this.record_tag(r),this.tag_type="SCRIPT"):r==="style"?n||(this.record_tag(r),this.tag_type="STYLE"):this.is_unformatted(r,v)?(c=this.get_unformatted("<\/"+r+">",u),t.push(c),e>0&&this.Utils.in_array(this.input.charAt(e-1),this.Utils.whitespace)&&t.splice(0,0,this.input.charAt(e-1)),h=this.pos-1,this.Utils.in_array(this.input.charAt(h+1),this.Utils.whitespace)&&t.push(this.input.charAt(h+1)),this.tag_type="SINGLE"):r.charAt(0)==="!"?n||(this.tag_type="SINGLE",this.traverse_whitespace()):n||(r.charAt(0)==="/"?(this.retrieve_tag(r.substring(1)),this.tag_type="END",this.traverse_whitespace()):(this.record_tag(r),r.toLowerCase()!=="html"&&(this.indent_content=!0),this.tag_type="START",this.traverse_whitespace()),this.Utils.in_array(r,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&this.output[this.output.length-2]!=="\n"&&this.print_newline(!0,this.output))),n&&(this.pos=l,this.line_char_count=a),t.join("")},this.get_comment=function(n){var t="",i=">",r=!1;for(this.pos=n,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length;){if(t+=input_char,t[t.length-1]===i[i.length-1]&&t.indexOf(i)!==-1)break;!r&&t.length<10&&(t.indexOf("<![if")===0?(i="<![endif]>",r=!0):t.indexOf("<![cdata[")===0?(i="]\]>",r=!0):t.indexOf("<![")===0?(i="]>",r=!0):t.indexOf("<!--")===0&&(i="-->",r=!0)),input_char=this.input.charAt(this.pos),this.pos++}return t},this.get_unformatted=function(n,t){if(t&&t.toLowerCase().indexOf(n)!==-1)return"";var r="",i="",u=0,f=!0;do{if(this.pos>=this.input.length)return i;if(r=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(r,this.Utils.whitespace)){if(!f){this.line_char_count--;continue}if(r==="\n"||r==="\r"){i+="\n",this.line_char_count=0;continue}}i+=r,this.line_char_count++,f=!0,o&&r==="{"&&i.length&&i[i.length-2]==="{"&&(i+=this.get_unformatted("}}"),u=i.length)}while(i.toLowerCase().indexOf(n,u)===-1);return i},this.get_token=function(){var n,t,i;return this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"?(t=this.last_token.substr(7),n=this.get_contents_to(t),typeof n!="string")?n:[n,"TK_"+t]:this.current_mode==="CONTENT"?(n=this.get_content(),typeof n!="string"?n:[n,"TK_CONTENT"]):this.current_mode==="TAG"?(n=this.get_tag(),typeof n!="string"?n:(i="TK_TAG_"+this.tag_type,[n,i])):void 0},this.get_full_indent=function(n){return(n=this.indent_level+n||0,n<1)?"":Array(n+1).join(this.indent_string)},this.is_unformatted=function(n,t){if(!this.Utils.in_array(n,t))return!1;if(n.toLowerCase()!=="a"||!this.Utils.in_array("a",t))return!0;var r=this.get_tag(!0),i=(r||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!i||this.Utils.in_array(i,t)?!0:!1},this.printer=function(n,t,r,u,f){this.input=n||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=r,this.brace_style=f,this.indent_level=0,this.wrap_line_length=u,this.line_char_count=0;for(var e=0;e<this.indent_size;e++)this.indent_string+=this.indent_character;this.print_newline=function(n,t){(this.line_char_count=0,t&&t.length)&&(n||t[t.length-1]!=="\n")&&t.push("\n")},this.print_indentation=function(n){for(var t=0;t<this.indent_level;t++)n.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(n){(n||n!=="")&&this.output.length&&this.output[this.output.length-1]==="\n"&&(this.print_indentation(this.output),n=i(n)),this.print_token_raw(n)},this.print_token_raw=function(n){n&&n!==""&&(n.length>1&&n[n.length-1]==="\n"?(this.output.push(n.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(n));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var e,b,k,d,g,nt,v,y,tt,o,p,it,c,w,s,l,h,a;for(r=r||{},(r.wrap_line_length===undefined||parseInt(r.wrap_line_length,10)===0)&&r.max_char!==undefined&&parseInt(r.max_char,10)!==0&&(r.wrap_line_length=r.max_char),b=r.indent_inner_html||!1,k=parseInt(r.indent_size||4,10),d=r.indent_char||" ",nt=r.brace_style||"collapse",g=parseInt(r.wrap_line_length,10)===0?32786:parseInt(r.wrap_line_length||250,10),v=r.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],y=r.preserve_newlines||!0,tt=y?parseInt(r.max_preserve_newlines||32786,10):0,o=r.indent_handlebars||!1,e=new rt,e.printer(n,d,k,g,nt);;){if(p=e.get_token(),e.token_text=p[0],e.token_type=p[1],e.token_type==="TK_EOF")break;switch(e.token_type){case"TK_TAG_START":e.print_newline(!1,e.output),e.print_token(e.token_text),e.indent_content&&(e.indent(),e.indent_content=!1),e.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":e.print_newline(!1,e.output),e.print_token(e.token_text),e.current_mode="CONTENT";break;case"TK_TAG_END":e.last_token==="TK_CONTENT"&&e.last_text===""&&(it=e.token_text.match(/\w+/)[0],c=null,e.output.length&&(c=e.output[e.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(c===null||c[1]!==it)&&e.print_newline(!1,e.output)),e.print_token(e.token_text),e.current_mode="CONTENT";break;case"TK_TAG_SINGLE":w=e.token_text.match(/^\s*<([a-z]+)/i),w&&e.Utils.in_array(w[1],v)||e.print_newline(!1,e.output),e.print_token(e.token_text),e.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":e.print_token(e.token_text),e.indent_content&&(e.indent(),e.indent_content=!1),e.current_mode="CONTENT";break;case"TK_CONTENT":e.print_token(e.token_text),e.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(e.token_text!==""){if(e.print_newline(!1,e.output),s=e.token_text,h=1,e.token_type==="TK_SCRIPT"?l=typeof u=="function"&&u:e.token_type==="TK_STYLE"&&(l=typeof f=="function"&&f),r.indent_scripts==="keep"?h=0:r.indent_scripts==="separate"&&(h=-e.indent_level),a=e.get_full_indent(h),l)s=l(s.replace(/^\s*/,a),r);else{var ut=s.match(/^\s*/)[0],ft=ut.match(/[^\n\r]*$/)[0].split(e.indent_string).length-1,et=e.get_full_indent(h-ft);s=s.replace(/^\s*/,a).replace(/\r\n|\r|\n/g,"\n"+et).replace(/\s+$/,"")}s&&(e.print_token_raw(a+t(s)),e.print_newline(!1,e.output))}e.current_mode="TAG"}e.last_token=e.token_type,e.last_text=e.token_text}return e.output.join("")}if(typeof define=="function"&&define.amd)define(["./beautify","./beautify-css"],function(t,i){return{html_beautify:function(r,u){return n(r,u,t,i)}}});else if(typeof exports!="undefined"){var r=require("./beautify.js").js_beautify,u=require("./beautify-css.js").css_beautify;exports.html_beautify=function(t,i){return n(t,i,r,u)}}else typeof window!="undefined"?window.html_beautify=function(t,i){return n(t,i,window.js_beautify,window.css_beautify)}:typeof global!="undefined"&&(global.html_beautify=function(t,i){return n(t,i,global.js_beautify,global.css_beautify)})}()